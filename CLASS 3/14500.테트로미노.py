#https://www.acmicpc.net/board/view/67816
N,M = map(int,(input().split()))

arr = []

for _ in range(N):

  arr.append(list(map(int,(input().split()))))

shape = [[[0,0],[0,1],[0,2],[0,3]],
    [[0,0],[1,0],[2,0],[3,0]],
    [[0,0],[0,1],[1,0],[1,1]],
    [[0,0],[0,1],[0,2],[1,0]],
    [[0,0],[0,1],[0,2],[1,2]],
    [[0,0],[1,0],[1,1],[1,2]],
    [[0,2],[1,2],[1,1],[1,0]],
    [[0,1],[0,0],[1,0],[2,0]],
    [[0,0],[0,1],[1,1],[2,1]],
    [[0,0],[1,0],[2,0],[2,1]],
    [[0,1],[1,1],[2,1],[2,0]],
    [[0,0],[0,1],[0,2],[1,1]],
    [[0,1],[1,0],[1,1],[1,2]],
    [[0,0],[1,0],[1,1],[2,0]],
    [[1,0],[0,1],[1,1],[2,1]],
    [[0,1],[1,1],[1,0],[2,0]],
    [[0,0],[1,0],[1,1],[2,1]],
    [[0,1],[0,2],[1,1],[1,0]],
    [[0,0],[0,1],[1,1],[1,2]]]

ans = 0

for i in range(N):
    for j in range(M):
        for figure in shape:
            sums = 0
            for k in range(4):
                nx = i + figure[k][0]
                ny = j + figure[k][1]
                if -1 < nx < N and -1 < ny < M:
                    sums += arr[nx][ny]
            ans = max(sums, ans)

print(ans)

